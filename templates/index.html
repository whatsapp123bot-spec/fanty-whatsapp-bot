<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fanty ‚Äî Panel</title>
    <style>
        body { font-family: Arial, sans-serif; margin:0; background:#f6f7fb; color:#222; display:flex; flex-direction: column; min-height:100vh; }
        header { background:#5b2a86; color:white; padding:20px; text-align:center; }
        main { flex:1; display:flex; align-items: center; justify-content: center; }
    </style>
</head>
<body>
        <header>
            <h1>üíã Fanty ‚Äî Panel</h1>
            <p>Simulador tipo WhatsApp + Carga de cat√°logos</p>
        </header>
        <main>
            <div class="cards" style="display:grid;grid-template-columns: repeat(auto-fit, minmax(260px,1fr)); gap:16px; width: 90vw; max-width: 900px;">
                <div class="card" style="background:white; border-radius:12px; padding:20px; box-shadow: 0 6px 16px rgba(0,0,0,0.08);">
                    <h2>Vista previa del chat</h2>
                    <p>Prueba el flujo del bot como si fueras un cliente. Escribe ‚Äúhola/holi‚Äù para ver los botones.</p>
                    <a href="/chat" class="btn preview" style="display:inline-block;padding:10px 16px;border-radius:8px;text-decoration:none;color:white;font-weight:600;background:#128c7e;">üü¢ Abrir vista previa</a>
                </div>
                <div class="card" style="background:white; border-radius:12px; padding:20px; box-shadow: 0 6px 16px rgba(0,0,0,0.08);">
                    <h2>Agregar cat√°logos</h2>
                    <p>Sube los PDFs para Disfraz Sexy, Lencer√≠a y Mallas. El bot enviar√° estos archivos en el chat.</p>
                    <a href="/admin" class="btn admin" style="display:inline-block;padding:10px 16px;border-radius:8px;text-decoration:none;color:white;font-weight:600;background:#7a00f0;">üü£ Agregar cat√°logos</a>
                </div>
                <div class="card" style="background:white; border-radius:12px; padding:20px; box-shadow: 0 6px 16px rgba(0,0,0,0.08);">
                    <h2>Editar flujo</h2>
                    <p>Construye el flujo con textos y botones sin tocar c√≥digo. Ingresa tu clave (VERIFY_TOKEN) para abrir el editor.</p>
                    <div class="flow-editor" style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
                        <input id="flowKey" type="password" placeholder="Clave (VERIFY_TOKEN)" style="flex:1; min-width:200px; padding:10px 12px; border:1px solid #ddd; border-radius:8px;" />
                        <button onclick="openFlow()" style="padding:10px 16px; border-radius:8px; border:0; background:#0b5ed7; color:white; font-weight:600; cursor:pointer;">üõ†Ô∏è Abrir editor</button>
                        <button onclick="openFlowVisual()" style="padding:10px 16px; border-radius:8px; border:0; background:#198754; color:white; font-weight:600; cursor:pointer;">üîß Editor visual</button>
                    </div>
                    <p style="font-size:12px; color:#777; margin-top:8px;">Rutas directas: <code>/flow?key=TU_CLAVE</code> y <code>/flow/builder?key=TU_CLAVE</code></p>
                </div>
            </div>
            <div class="status" style="margin-top:12px; font-size:14px; color:#555; text-align:center;">
                <p>Consejo: primero sube tus cat√°logos PDF en ‚ÄúAgregar cat√°logos‚Äù, luego pru√©balos en ‚ÄúVista previa del chat‚Äù.</p>
            </div>
        </main>
    <script>
        function openFlow() {
            const key = (document.getElementById('flowKey')?.value || '').trim();
            if (!key) {
                alert('Ingresa tu clave (VERIFY_TOKEN)');
                return;
            }
            window.location.href = '/flow?key=' + encodeURIComponent(key);
        }
        function openFlowVisual() {
            const key = (document.getElementById('flowKey')?.value || '').trim();
            if (!key) {
                alert('Ingresa tu clave (VERIFY_TOKEN)');
                return;
            }
            window.location.href = '/flow/builder?key=' + encodeURIComponent(key);
        }
    </script>
</body>
</html>
